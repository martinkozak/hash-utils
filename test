#!/usr/bin/ruby

$:.push("./lib")
require "hash-utils/string"
foo = "bb aa cc aa dd"

result = foo.gsub_f(/..(aa)/) do |match|
    puts match[1].inspect
    "XX"
end

puts result
